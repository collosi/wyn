-- Test shader that uses debug intrinsics

#[vertex] def vertex_main(#[builtin(vertex_index)] vertex_index: i32): (#[builtin(position)] vec4f32, #[location(0)] vec3f32) =
  -- Only debug output for first 3 vertices
  let _ = if vertex_index < 3 then
      let _ = debug_str "vtx:" in
      debug_i32 vertex_index
    else
      () in
  let position: vec4f32 = if vertex_index == 0 then
      vec4 -0.5f32 -0.5f32 0.0f32 1.0f32
    else if vertex_index == 1 then
      vec4 0.5f32 -0.5f32 0.0f32 1.0f32
    else
      vec4 0.0f32 0.5f32 0.0f32 1.0f32 in
  let color: vec3f32 = vec3 1.0f32 0.0f32 0.0f32 in
  (position, color)

#[fragment] def fragment_main(#[location(0)] color: vec3f32): #[location(0)] vec4f32 =
  vec4 color.x color.y color.z 1.0f32
