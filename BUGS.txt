KNOWN BUGS
==========

1. Polymorphic builtins get monomorphized on first use
------------------------------------------------------
Date: 2025-12-04

Polymorphic builtin functions like `magnitude`, `normalize`, `dot`, `cross`,
and `reflect` get their type fixed on first use and cannot be used with
different vector sizes in the same file.

Example that fails:
```
def test1 (v:vec3f32): f32 = magnitude v
def test2 (v:vec2f32): f32 = magnitude v  -- Error: Size(2) vs Size(3)
```

The second use fails with:
  Function argument type mismatch: Failure(Constructed(Size(2), []), Constructed(Size(3), []))

Each function works in isolation, but not when both appear in the same file.

Root cause: The type checker appears to monomorphize polymorphic builtins
on first use rather than instantiating fresh type variables for each call site.

Workaround: Use separate manual implementations for each vector size:
- length2/length3 instead of magnitude
- dot2v/dot3v instead of dot
- normalize3 instead of normalize
- cross3 instead of cross
- reflect3 instead of reflect

Affected code: wyn-core/src/poly_builtins.rs, wyn-core/src/types/checker.rs
